(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{205:function(e,t,n){},207:function(e,t,n){},236:function(e,t){},238:function(e,t){},251:function(e,t){},253:function(e,t){},281:function(e,t){},283:function(e,t){},284:function(e,t){},289:function(e,t){},291:function(e,t){},310:function(e,t){},322:function(e,t){},325:function(e,t){},342:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(11),c=n.n(a),o=(n(205),n(17)),i=n.n(o),s=n(29),u=(n(207),n(14)),l=n(373),j=n(383),d=n(343),b=n(377),f=n(111),p=n.n(f),O=n(110),h=n.n(O),x=n(3),m=function(e){var t=e.currentPage,n=e.setCurrentPage,r=e.pagesCount,a=new Array(r).fill(0).map((function(e,t){return t+1}));return Object(x.jsxs)(l.a,{container:!0,children:[Object(x.jsxs)(d.a,{color:"primary",onClick:function(){return n(1)},children:[Object(x.jsx)(h.a,{}),Object(x.jsx)(h.a,{})]}),Object(x.jsx)(l.a,{item:!0,xs:9,children:Object(x.jsx)(b.a,{fullWidth:!0,children:a.map((function(e){return Object(x.jsx)(d.a,{color:"primary",variant:e===t&&"contained",onClick:function(){return n(e)},children:e},e)}))})}),Object(x.jsxs)(d.a,{color:"primary",onClick:function(){return n(a.length)},children:[Object(x.jsx)(p.a,{}),Object(x.jsx)(p.a,{})]})]})},g=n(20),v=n(71),y=function(e){var t=e.handleFilter,n=e.filterType;return Object(x.jsx)(b.a,{children:[{title:"All",type:""},{title:"Done",type:"done"},{title:"Undone",type:"undone"}].map((function(e){return Object(x.jsx)(d.a,{color:"primary",variant:e.type===n&&"contained",onClick:function(){if(n!==e.type)return t(e.type)},children:e.title},e.title)}))})},S=n(378),k=n(186),w=n.n(k),C=n(185),T=n.n(C),A=function(e){var t=e.handleSorter,n=e.sorterType,r=function(e){e!==n&&t(e)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(S.a,{color:n?"primary":"default",onClick:function(){return r(!0)},children:Object(x.jsx)(T.a,{})}),Object(x.jsx)(S.a,{color:n?"default":"primary",onClick:function(){return r(!1)},children:Object(x.jsx)(w.a,{})})]})},I=function(e){var t=e.sorterFilter,n=e.setSorterFilter,r=e.setCurrentPage;return Object(x.jsxs)(l.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between",children:[Object(x.jsx)(l.a,{children:Object(x.jsx)(y,{handleFilter:function(e){n({sorterType:!0,filterType:e}),r(1)},filterType:t.filterType})}),Object(x.jsx)(l.a,{children:Object(x.jsxs)(l.a,{container:!0,direction:"row",alignItems:"center",children:[Object(x.jsx)(v.a,{children:"Sort by Date"}),Object(x.jsx)(A,{handleSorter:function(e){n((function(t){return Object(g.a)(Object(g.a)({},t),{},{sorterType:e})})),r(1)},sorterType:t.sorterType})]})})]})},D=n(386),F=function(e){var t=e.handleTodoSubmit,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],o=a[1],l=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.key){e.next=5;break}return n.preventDefault(),e.next=4,t(c);case 4:o("");case 5:case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)(D.a,{multiline:!0,label:"ToDo",fullWidth:!0,variant:"outlined",margin:"normal",onChange:function(e){return o(e.target.value)},onKeyDown:function(e){return l(e)},value:c})},P=n(380),L=n(381),W=n(388),B=n(382),E=n(189),U=n.n(E),q=n(188),J=n.n(q),K=n(187),R=n.n(K),z={border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:"5px",marginBottom:"10px"},H=function(e){var t=e.todo,n=e.handleTodoDelete,a=e.handleTodoChange,c=t.createdAt.match(/[0-9]+[\s\S][0-9]+[\s\S][0-9]+/)[0],o=Object(r.useState)(!1),j=Object(u.a)(o,2),d=j[0],b=j[1],f=Object(r.useState)(t),p=Object(u.a)(f,2),O=p[0],h=p[1],m=Object(r.useState)(!1),v=Object(u.a)(m,2),y=v[0],k=v[1],w=function(){var e=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.key){e.next=5;break}return n.preventDefault(),e.next=4,a(O);case 4:b(!1);case 5:"Escape"===n.key&&(b(!1),h(Object(g.a)(Object(g.a)({},O),{},{name:t.name})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(x.jsx)(L.a,{style:z,children:Object(x.jsxs)(l.a,{container:!0,direction:"row",alignItems:"center",children:[Object(x.jsx)(l.a,{item:!0,xs:1,children:Object(x.jsx)(W.a,{onChange:function(){return function(){var e=Object(g.a)(Object(g.a)({},O),{},{done:!O.done});h(e),a(e)}()},checked:O.done,color:"primary",icon:Object(x.jsx)(R.a,{}),checkedIcon:Object(x.jsx)(J.a,{})})}),Object(x.jsx)(l.a,{item:!0,xs:8,children:d?Object(x.jsx)(D.a,{onBlur:function(){return b(!1),void h(Object(g.a)(Object(g.a)({},O),{},{name:t.name}))},onChange:function(e){return h(Object(g.a)(Object(g.a)({},O),{},{name:e.target.value}))},onKeyDown:function(e){return w(t,e)},value:O.name,multiline:!0,autoFocus:!0,variant:"outlined",fullWidth:!0}):Object(x.jsx)(B.a,{primary:t.name,style:{overflowWrap:"break-word"},multiline:"true",onClick:function(){return b(!0)}})}),Object(x.jsx)(l.a,{item:!0,xs:2,children:Object(x.jsx)(B.a,{primary:c})}),Object(x.jsx)(l.a,{item:!0,xs:1,children:Object(x.jsx)(S.a,{disabled:y,onClick:function(){return k(!0),void n(t)},children:Object(x.jsx)(U.a,{})})})]})})},G=function(e){var t=e.todos,n=e.handleTodoDelete,r=e.handleTodoChange;return Object(x.jsx)(P.a,{children:t.map((function(e){return Object(x.jsx)(H,{todo:e,handleTodoDelete:n,handleTodoChange:r},e.uuid)}))})},M=n(190),N=n.n(M).a.create({baseURL:"http://localhost:3000"}),Q=n(23),V=n(57),X=Object(V.b)({name:"auth",initialState:{isAuth:!0,isSignup:!1},reducers:{toggleAuth:function(e){e.isAuth=!e.isAuth},toggleSignup:function(e){e.isSignup=!e.isSignup}}}),Y=X.actions,Z=Y.toggleAuth,$=Y.toggleSignup,_=function(e){return e.auth.isAuth},ee=function(e){return e.auth.isSignup},te=X.reducer,ne=function(){var e="task",t=Object(Q.b)(),n=Object(r.useState)([]),a=Object(u.a)(n,2),c=a[0],o=a[1],d=Object(r.useState)({sorterType:!0,filterType:""}),b=Object(u.a)(d,2),f=b[0],p=b[1],O=Object(r.useState)(1),h=Object(u.a)(O,2),g=h[0],v=h[1],y=Object(r.useState)(5),S=Object(u.a)(y,1)[0],k=Object(r.useState)(1),w=Object(u.a)(k,2),C=w[0],T=w[1],A=Object(r.useState)(!0),D=Object(u.a)(A,2),P=D[0],L=D[1],W=Object(r.useCallback)(Object(s.a)(i.a.mark((function e(){var n,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),N.defaults.headers.common.Authorization="Bearer ".concat(n),r=f.sorterType,a=f.filterType,e.next=6,N.get("/tasks",{params:{filterBy:a,order:r?"desc":"asc",curentPage:g,limit:S}});case 6:c=e.sent,o(c.data.tasks),T(c.data.pagesCount),L(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),"Incorrect token"===e.t0.response.data.message&&(localStorage.clear(),t(Z()));case 17:case"end":return e.stop()}}),e,null,[[0,12]])}))),[f,t,g,S]);Object(r.useEffect)((function(){W()}),[W]);var B=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.post(e,{name:n,done:!1});case 2:return t.next=4,W();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(s.a)(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.uuid,t.next=3,N.delete("".concat(e,"/").concat(r));case 3:return t.next=5,W();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=Object(s.a)(i.a.mark((function t(n){var r,a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,a=n.done,c=n.uuid,t.next=3,N.patch("".concat(e,"/").concat(c),{name:r,done:a});case 3:return t.next=5,W();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(F,{handleTodoSubmit:B,todos:c,setTodos:o}),Object(x.jsx)(I,{sorterFilter:f,setSorterFilter:p,setCurrentPage:v}),!P&&Object(x.jsx)(G,{todos:c,handleTodoDelete:E,handleTodoChange:U}),C>1&&!P&&Object(x.jsx)(m,{pagesCount:C,currentPage:g,setCurrentPage:v}),P&&Object(x.jsx)(l.a,{container:!0,alignItems:"center",direction:"column",children:Object(x.jsx)(l.a,{item:!0,children:Object(x.jsx)(j.a,{})})})]})},re=n(13),ae=function(e){var t=e.handleLogin,n=e.handleSignup,a=Object(Q.c)(ee),c=Object(r.useState)({name:"",password:""}),o=Object(u.a)(c,2),i=o[0],s=o[1],j=Object(r.useState)(""),b=Object(u.a)(j,2),f=b[0],p=b[1],O=function(e){var t=e.target.value;s(Object(g.a)(Object(g.a)({},i),{},Object(re.a)({},e.target.name,t))),p("")};return Object(x.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:Object(x.jsxs)(l.a,{container:!0,direction:"column",alignItems:"center",children:[Object(x.jsx)(D.a,{name:"name",error:""!==f,helperText:f,onChange:function(e){return O(e)},value:i.name,label:"Username",required:!0,fullWidth:!0,variant:"outlined",margin:"normal"}),Object(x.jsx)(D.a,{name:"password",required:!0,onChange:function(e){return O(e)},value:i.password,label:"Password",fullWidth:!0,variant:"outlined",margin:"normal",type:"password"}),a?Object(x.jsx)(d.a,{type:"submit",onClick:function(){return t(i)},color:"primary",variant:"contained",children:"Login"}):Object(x.jsx)(d.a,{type:"submit",onClick:function(){return n(i)},color:"secondary",variant:"contained",children:"sign up"})]})})},ce=n(384),oe=n(390),ie=function(e){var t=e.handleSignout,n=Object(Q.c)(_),r=Object(Q.c)(ee),a=Object(Q.b)(),c=localStorage.getItem("name");return Object(x.jsxs)(l.a,{container:!0,alignItems:"center",justify:"space-between",children:[Object(x.jsx)(l.a,{item:!0,sx:8,children:Object(x.jsx)(v.a,{variant:"h3",align:"center",children:"To Do"})}),n?Object(x.jsx)(l.a,{children:Object(x.jsx)(d.a,{color:r?"secondary":"primary",variant:"contained",onClick:function(){return a($())},children:r?"sign up":"login"})}):Object(x.jsx)(l.a,{item:!0,xs:4,children:Object(x.jsxs)(l.a,{container:!0,alignItems:"center",justify:"space-between",children:[Object(x.jsx)(v.a,{children:c}),Object(x.jsx)(d.a,{onClick:function(){return t()},color:"primary",variant:"contained",children:"Signout"})]})})]})},se=n(192),ue=Object(V.b)({name:"alert",initialState:{isAlert:!1,message:"",status:""},reducers:{setAlert:function(e,t){e.isAlert=t.payload.isAlert,e.message=t.payload.message,e.status=t.payload.status},setIsAlert:function(e,t){e.isAlert=t.payload}}}),le=ue.actions,je=le.setAlert,de=le.setIsAlert,be=function(e){return e.alert},fe=ue.reducer,pe=n(387),Oe=n(385);var he=function(){var e=Object(Q.c)(be),t=Object(Q.c)(_),n=Object(Q.b)(),a=Object(r.useCallback)((function(){var e;if(localStorage.token){var t=null===(e=Object(se.decode)(localStorage.token))||void 0===e?void 0:e.exp;Date.now()>t&&n(Z())}}),[n]);Object(r.useLayoutEffect)((function(){a()}),[a]);var c=function(){var e=Object(s.a)(i.a.mark((function e(t){var r,a,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.password,e.next=3,N.post("/login",{name:r,password:a});case 3:c=e.sent,o=c.data.token,localStorage.setItem("token",o),localStorage.setItem("name",r),n(Z());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.password,e.next=3,N.post("/signup",{name:n,password:r});case 3:c({name:n,password:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(ce.a,{maxWidth:"sm",children:[Object(x.jsx)(ie,{handleSignout:function(){localStorage.clear(),n(Z())}}),t?Object(x.jsx)(ae,{handleLogin:c,handleSignup:o}):Object(x.jsx)(ne,{}),Object(x.jsx)(oe.a,{onClose:function(){n(de(!1))},open:e.isAlert,autoHideDuration:3e3,children:Object(x.jsxs)(pe.a,{severity:"error",children:[Object(x.jsx)(Oe.a,{children:"Status code ".concat(e.status)}),e.message]})})]})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,391)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},me=Object(V.a)({reducer:{auth:te,alert:fe}});N.interceptors.response.use(null,(function(e){var t={isAlert:!0,message:e.response.data.message,status:e.response.status};return me.dispatch(je(t)),Promise.reject(e)})),c.a.render(Object(x.jsx)(Q.a,{store:me,children:Object(x.jsx)(he,{})}),document.getElementById("root")),xe()}},[[342,1,2]]]);
//# sourceMappingURL=main.1931a1ed.chunk.js.map